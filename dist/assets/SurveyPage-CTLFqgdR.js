import{c as E,r as i,v as L,x as j,y as z,j as e,G as T,A as D}from"./index-4AM2v5zk.js";import{A as m}from"./AppLayout-DnmHfUMc.js";import{C as v}from"./circle-check-C5tol9Y-.js";import{A as P}from"./arrow-left-DrhcKYZr.js";import{A as B}from"./arrow-right-BfhQKrAS.js";import"./PublicLayout-D-U2DQrY.js";import"./settings-CowGALAk.js";import"./log-out-C0nOjRAr.js";const d=[{id:"loneliness",title:"UCLA Yalnızlık Ölçeği",desc:"Son iki haftayı düşünerek yanıtlayın.",questions:["Etrafınızda insanlar olmasına rağmen yalnız hissediyorsunuz.","Arkadaşlarınızın olmadığını hissediyorsunuz.","Çevrenizdekilerle iletişim kurmakta güçlük çekiyorsunuz.","Anlaşabileceğiniz kimse olmadığını hissediyorsunuz.","Sosyal ortamlarda dışlanmış hissediyorsunuz."]},{id:"motivation",title:"Akademik Motivasyon",desc:"Akademik çalışmalarınızla ilgili son durumunuzu değerlendirin.",questions:["Derslerinize karşı istekli hissediyorsunuz.","Ödevlerinizi zamanında tamamlıyorsunuz.","Çalışma hedeflerinize ulaşabileceğinize inanıyorsunuz.","Öğrenmeye karşı meraklı ve isteklisiniz.","Akademik başarılarınızdan memnunsunuz."]},{id:"procrastination",title:"Akademik Erteleme",desc:"Çalışma alışkanlıklarınızı değerlendirin.",questions:["Çalışmayı genellikle son dakikaya erteliyorsunuz.","Ödevleri başlamakta güçlük çekiyorsunuz.","Çalışırken dikkatinizin dağıldığını fark ediyorsunuz.","Planladığınız çalışma süresini genellikle kısaltıyorsunuz.","Önemli görevleri erteleyip daha kolay işlerle zaman geçiriyorsunuz."]}],q=["Hiçbir Zaman","Nadiren","Bazen","Sıklıkla","Her Zaman"],K=()=>{const{currentUser:c}=E(),[A,u]=i.useState(!1),[N,x]=i.useState(!0),[r,y]=i.useState(0),[k,S]=i.useState({}),[h,p]=i.useState(!1);i.useEffect(()=>{c&&L(j(z,"surveys",c.uid)).then(a=>{var s,l;a.exists()&&((l=(s=a.data())==null?void 0:s.preTest)!=null&&l.completedAt)&&u(!0),x(!1)}).catch(()=>x(!1))},[c]);const t=d[r],o=k[t.id]||{},f=t.questions.every((a,s)=>o[s]!==void 0),b=d.reduce((a,s,l)=>l<r?a+s.questions.length:l===r?a+Object.keys(o).length:a,0),g=d.reduce((a,s)=>a+s.questions.length,0),w=(a,s)=>{S(l=>({...l,[t.id]:{...l[t.id]||{},[a]:s}}))},C=async()=>{p(!0);try{const a={};d.forEach(s=>{a[s.id]=Object.values(k[s.id]||{})}),await T(j(z,"surveys",c.uid),{preTest:{...a,completedAt:D()}},{merge:!0}),u(!0)}catch(a){console.error(a)}finally{p(!1)}};return N?e.jsx(m,{title:"Anket",children:e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-2 rounded-full animate-spin",style:{borderColor:"rgba(245,237,216,0.15)",borderTopColor:"var(--amber)"}})})}):A?e.jsx(m,{title:"Anket",children:e.jsxs("div",{className:"glass-card p-16 text-center max-w-lg mx-auto",children:[e.jsx(v,{size:56,className:"mx-auto mb-4",style:{color:"#5ABF8A"}}),e.jsx("h2",{className:"font-display text-2xl font-bold text-cream mb-3",children:"Anket Tamamlandı!"}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:"var(--mist)"},children:"Ön test yanıtların kaydedildi. Platform kullanımı sonrası son test de senden istenecek. Sonuçların ilerleme sayfanda karşılaştırmalı olarak gösterilecek."})]})}):e.jsxs(m,{title:"Ön Test Anketi",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",style:{color:"var(--mist)"},children:[e.jsx("span",{children:t.title}),e.jsxs("span",{children:[b,"/",g," soru"]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{background:"rgba(245,237,216,0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${b/g*100}%`,background:"var(--amber)"}})}),e.jsx("div",{className:"flex gap-2 mt-3",children:d.map((a,s)=>e.jsx("div",{className:"flex-1 h-1 rounded-full",style:{background:s<r?"var(--sage)":s===r?"var(--amber)":"rgba(245,237,216,0.1)"}},s))})]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-display text-2xl font-bold text-cream mb-1",children:t.title}),e.jsx("p",{className:"text-sm",style:{color:"var(--mist)"},children:t.desc})]}),e.jsx("div",{className:"flex flex-col gap-4 mb-8",children:t.questions.map((a,s)=>e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("p",{className:"text-sm text-cream mb-4 leading-relaxed",children:[e.jsxs("span",{className:"font-mono text-xs mr-2",style:{color:"var(--amber)"},children:[s+1,"."]}),a]}),e.jsx("div",{className:"flex gap-2",children:q.map((l,n)=>e.jsxs("button",{onClick:()=>w(s,n+1),className:"flex-1 flex flex-col items-center gap-1 py-2 rounded-xl transition-all text-xs",style:{background:o[s]===n+1?"var(--amber)":"rgba(245,237,216,0.05)",color:o[s]===n+1?"var(--ink)":"var(--mist)",border:o[s]===n+1?"none":"1px solid rgba(245,237,216,0.1)"},children:[e.jsx("span",{className:"font-mono font-bold",children:n+1}),e.jsx("span",{className:"hidden sm:block text-center leading-tight",style:{fontSize:"10px"},children:l})]},n))})]},s))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:()=>y(a=>Math.max(0,a-1)),disabled:r===0,className:"btn-outline px-6 py-2.5 flex items-center gap-2 disabled:opacity-30 disabled:cursor-not-allowed",children:[e.jsx(P,{size:16})," Geri"]}),r<d.length-1?e.jsxs("button",{onClick:()=>y(a=>a+1),disabled:!f,className:"btn-primary px-6 py-2.5 flex items-center gap-2 disabled:opacity-40 disabled:cursor-not-allowed",children:["Devam Et ",e.jsx(B,{size:16})]}):e.jsx("button",{onClick:C,disabled:!f||h,className:"btn-primary px-6 py-2.5 flex items-center gap-2 disabled:opacity-40 disabled:cursor-not-allowed",children:h?"Kaydediliyor...":e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16})," Tamamla"]})})]})]})]})};export{K as default};
