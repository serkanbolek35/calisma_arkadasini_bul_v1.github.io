import{c as K,r as y,j as e,L as g,d as W}from"./index-BBddTGOj.js";import{c as k,B as F,L as G}from"./PublicLayout-CIYkHypp.js";import{g as q}from"./session.service-DDr7ccXe.js";import{g as Y}from"./matching.service-DX785fuM.js";import{C as I}from"./clock-Dumgg9_L.js";import{U as X,T as U}from"./users-CVOmTVbI.js";import{R as C,B as J,X as T,Y as z,T as B,a as Q,L as V,C as Z,b as _}from"./BarChart-USBk8mo6.js";import{S as ee}from"./settings-Be80CAJe.js";import{L as te}from"./log-out-78Q37P80.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=k("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=k("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=k("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),le=a=>{const s=["Paz","Pzt","Sal","Ã‡ar","Per","Cum","Cmt"],r={Paz:0,Pzt:0,Sal:0,Ã‡ar:0,Per:0,Cum:0,Cmt:0},l=new Date,o=new Date(l.getTime()-7*24*60*60*1e3);return a.forEach(n=>{if(n.status!=="completed"||!n.createdAt)return;const f=n.createdAt.toDate?n.createdAt.toDate():new Date(n.createdAt);if(f<o)return;const p=s[f.getDay()];r[p]+=n.durationMinutes||0}),s.map(n=>({day:n,minutes:r[n]}))},ne=a=>{if(a.length===0)return[];const s={};return a.forEach(r=>{var n;if(!r.rating||!r.createdAt)return;const l=r.createdAt.toDate?r.createdAt.toDate():new Date(r.createdAt),o=`H${Math.ceil((new Date-l)/(7*24*60*60*1e3))}`;s[o]||(s[o]={total:0,count:0}),s[o].total+=((n=r.rating)==null?void 0:n.focusLevel)||3,s[o].count+=1}),Object.entries(s).slice(0,5).reverse().map(([r,l])=>({week:r,score:+(l.total/l.count).toFixed(1)}))},v=({icon:a,label:s,value:r,sub:l,color:o="var(--amber)"})=>e.jsxs("div",{className:"glass-card p-5 flex items-start gap-4 group hover:border-white/15 transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${o}18`},children:e.jsx(a,{size:20,style:{color:o}})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-2xl font-display font-bold text-cream leading-none mb-1",children:r}),e.jsx("p",{className:"text-xs font-body font-medium text-cream/80",children:s}),l&&e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--mist)"},children:l})]})]}),oe=({active:a,payload:s,label:r})=>{if(!a||!(s!=null&&s.length))return null;const l=s[0].value;return e.jsxs("div",{className:"px-3 py-2 rounded-xl text-xs",style:{background:"rgba(13,13,13,0.95)",border:"1px solid rgba(245,237,216,0.15)",color:"var(--cream)"},children:[e.jsx("p",{className:"font-mono",style:{color:"var(--amber)"},children:r}),e.jsxs("p",{children:[Math.floor(l/60),"s ",l%60,"dk"]})]})},ie=({user:a,userDoc:s})=>{var f,p;const[r,l]=y.useState(!1),o=async()=>{l(!0),await W()},n=[{icon:"ðŸ“Š",label:"Dashboard",to:"/dashboard",active:!0},{icon:"ðŸ¤",label:"EÅŸleÅŸmeler",to:"/eslesmeler"},{icon:"â±",label:"Oturumlar",to:"/oturumlar"},{icon:"ðŸ“ˆ",label:"Ä°lerleme",to:"/ilerleme"},{icon:"ðŸ§ ",label:"Anket",to:"/anket"}];return e.jsxs("aside",{className:"hidden md:flex flex-col w-60 flex-shrink-0 border-r",style:{borderColor:"rgba(245,237,216,0.07)"},children:[e.jsx("div",{className:"p-6 border-b",style:{borderColor:"rgba(245,237,216,0.07)"},children:e.jsx(G,{})}),e.jsx("div",{className:"px-4 py-4 border-b",style:{borderColor:"rgba(245,237,216,0.07)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-display font-bold flex-shrink-0",style:{background:"var(--amber)",color:"var(--ink)"},children:((f=s==null?void 0:s.displayName)==null?void 0:f.charAt(0))||((p=a==null?void 0:a.email)==null?void 0:p.charAt(0))||"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-cream truncate",children:(s==null?void 0:s.displayName)||"KullanÄ±cÄ±"}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--mist)"},children:a==null?void 0:a.email})]})]})}),e.jsx("nav",{className:"flex-1 px-3 py-4 flex flex-col gap-1",children:n.map(({icon:c,label:x,to:b,active:m})=>e.jsxs(g,{to:b,className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-body font-medium transition-all duration-200",style:{background:m?"rgba(232,160,32,0.1)":"transparent",color:m?"var(--amber)":"var(--mist)",border:m?"1px solid rgba(232,160,32,0.2)":"1px solid transparent"},onMouseEnter:u=>{m||(u.currentTarget.style.color="var(--cream)")},onMouseLeave:u=>{m||(u.currentTarget.style.color=m?"var(--amber)":"var(--mist)")},children:[e.jsx("span",{className:"text-base",children:c}),x]},b))}),e.jsxs("div",{className:"px-3 py-4 border-t flex flex-col gap-1",style:{borderColor:"rgba(245,237,216,0.07)"},children:[e.jsxs(g,{to:"/profil",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-all",style:{color:"var(--mist)"},onMouseEnter:c=>c.currentTarget.style.color="var(--cream)",onMouseLeave:c=>c.currentTarget.style.color="var(--mist)",children:[e.jsx(ee,{size:16})," Ayarlar"]}),e.jsxs("button",{onClick:o,disabled:r,className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-all w-full text-left",style:{color:"var(--mist)"},onMouseEnter:c=>c.currentTarget.style.color="var(--error)",onMouseLeave:c=>c.currentTarget.style.color="var(--mist)",children:[e.jsx(te,{size:16})," ",r?"Ã‡Ä±kÄ±lÄ±yor...":"Ã‡Ä±kÄ±ÅŸ Yap"]})]})]})},P=({icon:a,title:s,desc:r,actionTo:l,actionLabel:o})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:a}),e.jsx("p",{className:"font-display font-semibold text-cream",children:s}),e.jsx("p",{className:"text-sm",style:{color:"var(--mist)"},children:r}),l&&e.jsx(g,{to:l,className:"btn-primary px-5 py-2 text-sm mt-1",children:o})]}),be=()=>{var D;const{currentUser:a,userDoc:s}=K(),r=(s==null?void 0:s.displayName)||((D=a==null?void 0:a.email)==null?void 0:D.split("@")[0])||"Ã–ÄŸrenci",[l,o]=y.useState([]),[n,f]=y.useState([]),[p,c]=y.useState(!0);y.useEffect(()=>{if(!a)return;(async()=>{try{const[i,d]=await Promise.all([q(a.uid,20),Y(a.uid)]);o(i),f(d)}catch(i){console.error(i)}finally{c(!1)}})()},[a]);const x=l.filter(t=>t.status==="completed"),b=x.reduce((t,i)=>t+(i.durationMinutes||0),0),m=n.filter(t=>t.status==="active").length,u=n.filter(t=>t.status==="pending"&&t.initiatedBy!==(a==null?void 0:a.uid)).length,O=new Date(Date.now()-7*24*60*60*1e3),w=x.filter(t=>{var d;return((d=t.createdAt)!=null&&d.toDate?t.createdAt.toDate():new Date(t.createdAt||0))>O}),j=w.reduce((t,i)=>t+(i.durationMinutes||0),0),M=Math.floor(j/60),H=j%60,A=le(x),L=ne(x),S=l.slice(0,3),$=A.some(t=>t.minutes>0),R=L.length>0;return e.jsxs("div",{className:"min-h-screen bg-ink flex",children:[e.jsx(ie,{user:a,userDoc:s}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsxs("header",{className:"px-6 py-4 border-b flex items-center justify-between",style:{borderColor:"rgba(245,237,216,0.07)"},children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"font-display text-xl font-semibold text-cream",children:["Merhaba, ",r.split(" ")[0],"! ðŸ‘‹"]}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--mist)"},children:new Date().toLocaleDateString("tr-TR",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"w-9 h-9 rounded-xl flex items-center justify-center transition-colors glass-card hover:border-white/15 relative",children:[e.jsx(ae,{size:16,className:"text-cream/60"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full text-xs flex items-center justify-center font-bold",style:{background:"var(--amber)",color:"var(--ink)"},children:u})]}),e.jsxs(g,{to:"/oturumlar/planla",className:"btn-primary px-4 py-2 text-sm flex items-center gap-1.5",children:[e.jsx(re,{size:15})," Oturum Planla"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6 p-4 rounded-2xl flex items-center gap-4",style:{background:"linear-gradient(135deg, rgba(232,160,32,0.12) 0%, rgba(90,122,90,0.08) 100%)",border:"1px solid rgba(232,160,32,0.2)"},children:[e.jsx("div",{className:"text-2xl animate-float",children:"âœ¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-display font-semibold text-cream",children:'"KÃ¼Ã§Ã¼k adÄ±mlar, bÃ¼yÃ¼k yolculuklarÄ±n baÅŸlangÄ±cÄ±dÄ±r."'}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--mist)"},children:"GÃ¼nÃ¼n motivasyon mesajÄ±"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(v,{icon:I,label:"Bu Hafta",value:j===0?"â€”":`${M>0?M+"s ":""}${H}dk`,sub:j===0?"HenÃ¼z oturum yok":`${w.length} oturum tamamlandÄ±`,color:"var(--amber)"}),e.jsx(v,{icon:se,label:"Toplam Oturum",value:x.length||"â€”",sub:x.length===0?"HenÃ¼z oturum yok":`${Math.floor(b/60)}s ${b%60}dk toplam`,color:"#E87070"}),e.jsx(v,{icon:X,label:"Aktif EÅŸleÅŸme",value:m||"â€”",sub:u>0?`${u} istek bekliyor`:"Bekleyen istek yok",color:"var(--sage-light)"}),e.jsx(v,{icon:U,label:"Bu Ay",value:x.filter(t=>{var d;return((d=t.createdAt)!=null&&d.toDate?t.createdAt.toDate():new Date(t.createdAt||0)).getMonth()===new Date().getMonth()}).length||"â€”",sub:"tamamlanan oturum",color:"var(--mist)"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card p-5",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-mono tracking-widest uppercase mb-1",style:{color:"var(--amber)"},children:"HaftalÄ±k Ã‡alÄ±ÅŸma"}),e.jsx("h3",{className:"font-display text-lg font-semibold text-cream",children:"Bu Hafta"})]})}),$?e.jsx(C,{width:"100%",height:160,children:e.jsxs(J,{data:A,barSize:24,margin:{top:0,right:0,bottom:0,left:-20},children:[e.jsx(T,{dataKey:"day",tick:{fill:"var(--mist)",fontSize:11,fontFamily:"DM Sans"},axisLine:!1,tickLine:!1}),e.jsx(z,{hide:!0}),e.jsx(B,{content:e.jsx(oe,{}),cursor:{fill:"rgba(245,237,216,0.04)"}}),e.jsx(Q,{dataKey:"minutes",fill:"var(--amber)",radius:[6,6,0,0],opacity:.85})]})}):e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx(P,{icon:"ðŸ“…",title:"Bu hafta oturum yok",desc:"Ä°lk oturumunu planla, grafik burada gÃ¶rÃ¼necek.",actionTo:"/oturumlar/planla",actionLabel:"Oturum Planla"})})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-xs font-mono tracking-widest uppercase mb-1",style:{color:"var(--amber)"},children:"Motivasyon"}),e.jsx("h3",{className:"font-display text-lg font-semibold text-cream",children:"Trend"})]}),R?e.jsx(C,{width:"100%",height:160,children:e.jsxs(V,{data:L,margin:{top:5,right:5,bottom:0,left:-30},children:[e.jsx(Z,{strokeDasharray:"3 3",stroke:"rgba(245,237,216,0.06)"}),e.jsx(T,{dataKey:"week",tick:{fill:"var(--mist)",fontSize:11},axisLine:!1,tickLine:!1}),e.jsx(z,{domain:[1,5],tick:{fill:"var(--mist)",fontSize:11},axisLine:!1,tickLine:!1}),e.jsx(B,{contentStyle:{background:"rgba(13,13,13,0.95)",border:"1px solid rgba(245,237,216,0.15)",borderRadius:"12px",color:"var(--cream)",fontSize:12},formatter:t=>[t,"Motivasyon"]}),e.jsx(_,{type:"monotone",dataKey:"score",stroke:"var(--sage-light)",strokeWidth:2.5,dot:{fill:"var(--sage-light)",strokeWidth:0,r:4},activeDot:{r:6,fill:"var(--amber)"}})]})}):e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsxs("p",{className:"text-xs text-center",style:{color:"var(--mist)"},children:["Oturum deÄŸerlendirmelerin",e.jsx("br",{}),"burada gÃ¶rÃ¼necek"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-display text-base font-semibold text-cream",children:"Son Oturumlar"}),e.jsxs(g,{to:"/oturumlar",className:"text-xs flex items-center gap-1",style:{color:"var(--amber)"},children:["TÃ¼mÃ¼nÃ¼ GÃ¶r ",e.jsx(E,{size:14})]})]}),p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 rounded-full animate-spin",style:{borderColor:"rgba(245,237,216,0.2)",borderTopColor:"var(--amber)"}})}):S.length===0?e.jsx(P,{icon:"ðŸ“š",title:"HenÃ¼z oturum yok",desc:"Ä°lk Ã§alÄ±ÅŸma oturumunu planla.",actionTo:"/oturumlar/planla",actionLabel:"Oturum Planla"}):e.jsx("div",{className:"flex flex-col gap-3",children:S.map((t,i)=>{var h;const N=((h=t.createdAt)!=null&&h.toDate?t.createdAt.toDate():new Date(t.createdAt||0)).toLocaleDateString("tr-TR",{day:"numeric",month:"short"});return e.jsxs("div",{className:"flex items-center gap-4 py-3 border-b last:border-0",style:{borderColor:"rgba(245,237,216,0.07)"},children:[e.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:"rgba(232,160,32,0.1)"},children:e.jsx(F,{size:15,style:{color:"var(--amber)"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-cream",children:t.subject||"Genel Ã‡alÄ±ÅŸma"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--mist)"},children:[t.durationMinutes?`${t.durationMinutes} dk`:"SÃ¼re yok"," Â·"," ",e.jsx("span",{className:"capitalize",children:t.status==="completed"?"âœ“ TamamlandÄ±":t.status==="planned"?"â³ PlanlandÄ±":t.status==="cancelled"?"âœ— Ä°ptal":t.status})]})]}),e.jsx("p",{className:"text-xs flex-shrink-0",style:{color:"var(--mist)"},children:N})]},i)})})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("h3",{className:"font-display text-base font-semibold text-cream mb-4",children:"HÄ±zlÄ± EriÅŸim"}),e.jsx("div",{className:"flex flex-col gap-2.5",children:[{icon:"ðŸ¤",label:"EÅŸleÅŸme Bul",to:"/eslesmeler",sub:m>0?`${m} aktif eÅŸleÅŸme`:"ArkadaÅŸ bul"},{icon:"â±",label:"Oturum BaÅŸlat",to:"/oturumlar",sub:"Ã‡alÄ±ÅŸmaya baÅŸla"},{icon:"ðŸ“Š",label:"Ä°lerleme",to:"/ilerleme",sub:"Ä°statistiklerin"},{icon:"ðŸ§ ",label:"Anket",to:"/anket",sub:"DeÄŸerlendirmeler"}].map(({icon:t,label:i,to:d,sub:N})=>e.jsxs(g,{to:d,className:"flex items-center gap-3 p-3 rounded-xl transition-all duration-200 group",style:{background:"rgba(245,237,216,0.04)",border:"1px solid rgba(245,237,216,0.08)"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(245,237,216,0.08)",h.currentTarget.style.borderColor="rgba(245,237,216,0.15)"},onMouseLeave:h=>{h.currentTarget.style.background="rgba(245,237,216,0.04)",h.currentTarget.style.borderColor="rgba(245,237,216,0.08)"},children:[e.jsx("span",{className:"text-lg",children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-cream",children:i}),e.jsx("p",{className:"text-xs",style:{color:"var(--mist)"},children:N})]}),e.jsx(E,{size:15,className:"text-cream/30 group-hover:text-cream/60 transition-colors"})]},d))})]})]})]})]})]})};export{be as default};
