import{c as C,r as n,j as e,L as S,o as A}from"./index-BBddTGOj.js";import{A as M}from"./AppLayout-BGUvaGkJ.js";import{g as B,f as P,e as z,r as w}from"./matching.service-DX785fuM.js";import{U as G}from"./user-plus-DWFSZnlo.js";import{C as R}from"./circle-check-R-dCLeZ1.js";import{c as L}from"./PublicLayout-CIYkHypp.js";import"./settings-Be80CAJe.js";import"./log-out-78Q37P80.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=L("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),F=({status:t,isIncoming:a})=>t==="active"?e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full font-medium",style:{background:"rgba(58,138,90,0.15)",color:"#5ABF8A",border:"1px solid rgba(58,138,90,0.25)"},children:"â— Aktif"}):t==="pending"&&a?e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full font-medium",style:{background:"rgba(232,160,32,0.15)",color:"var(--amber)",border:"1px solid rgba(232,160,32,0.25)"},children:"â³ Bekliyor"}):t==="pending"?e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full font-medium",style:{background:"rgba(138,154,170,0.15)",color:"var(--mist)",border:"1px solid rgba(138,154,170,0.2)"},children:"GÃ¶nderildi"}):null,k=({match:t,currentUserId:a,onAccept:b,onReject:o,onEnd:f})=>{var l,r,i;const c=(l=t.users)==null?void 0:l.find(h=>h!==a),m=t.initiatedBy!==a&&t.status==="pending";return e.jsxs("div",{className:"glass-card p-5 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-display font-bold text-sm flex-shrink-0",style:{background:"rgba(232,160,32,0.15)",color:"var(--amber)"},children:((r=c==null?void 0:c.charAt(0))==null?void 0:r.toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-body font-medium text-cream",children:t.otherUserName||"KullanÄ±cÄ±"}),e.jsx("p",{className:"text-xs",style:{color:"var(--mist)"},children:((i=t.commonSubjects)==null?void 0:i.join(", "))||"Ortak ders bilgisi yok"})]})]}),e.jsx(F,{status:t.status,isIncoming:m})]}),t.compatibilityScore>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 rounded-full",style:{background:"rgba(245,237,216,0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${t.compatibilityScore}%`,background:"var(--amber)"}})}),e.jsxs("span",{className:"text-xs font-mono",style:{color:"var(--amber)"},children:["%",t.compatibilityScore," uyum"]})]}),e.jsxs("div",{className:"flex gap-2",children:[m&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(t.id),className:"flex-1 btn-primary py-2 text-sm flex items-center justify-center gap-1.5",children:[e.jsx(R,{size:14})," Kabul Et"]}),e.jsxs("button",{onClick:()=>o(t.id),className:"flex-1 btn-outline py-2 text-sm flex items-center justify-center gap-1.5",children:[e.jsx(T,{size:14})," Reddet"]})]}),t.status==="active"&&e.jsx("button",{onClick:()=>f(t.id),className:"flex-1 btn-outline py-2 text-sm text-center",style:{borderColor:"rgba(200,64,64,0.3)",color:"#E87070"},children:"EÅŸleÅŸmeyi SonlandÄ±r"})]})]})},J=()=>{const{currentUser:t}=C(),[a,b]=n.useState([]),[o,f]=n.useState([]),[c,m]=n.useState(!0),[l,r]=n.useState("active"),i=async()=>{try{const s=await B(t.uid);b(s)}catch(s){console.error(s)}finally{m(!1)}},h=async()=>{try{const s=await A(t.uid),N=(s==null?void 0:s.subjects)||[],u=(s==null?void 0:s.campus)||"",p=await P(t.uid,N,u);f(p.slice(0,10))}catch(s){console.error(s)}};n.useEffect(()=>{t&&i()},[t]),n.useEffect(()=>{l==="find"&&t&&h()},[l]);const g=async s=>{await w(s,!0),i()},j=async s=>{await w(s,!1),i()},y=async s=>{await z(s),i()},v=a.filter(s=>s.status==="active"),d=a.filter(s=>s.status==="pending"&&s.initiatedBy!==(t==null?void 0:t.uid)),x=a.filter(s=>s.status==="pending"&&s.initiatedBy===(t==null?void 0:t.uid)),E=[{id:"active",label:"Aktif",count:v.length},{id:"incoming",label:"Gelen Ä°stekler",count:d.length},{id:"find",label:"EÅŸleÅŸme Bul",count:null}];return e.jsxs(M,{title:"EÅŸleÅŸmeler",children:[e.jsx("div",{className:"flex gap-2 mb-6",children:E.map(s=>e.jsxs("button",{onClick:()=>r(s.id),className:"px-4 py-2 rounded-xl text-sm font-body font-medium transition-all flex items-center gap-2",style:{background:l===s.id?"rgba(232,160,32,0.12)":"rgba(245,237,216,0.04)",color:l===s.id?"var(--amber)":"var(--mist)",border:l===s.id?"1px solid rgba(232,160,32,0.25)":"1px solid rgba(245,237,216,0.08)"},children:[s.label,s.count!==null&&s.count>0&&e.jsx("span",{className:"w-5 h-5 rounded-full text-xs flex items-center justify-center font-bold",style:{background:"var(--amber)",color:"var(--ink)"},children:s.count})]},s.id))}),c?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-2 rounded-full animate-spin",style:{borderColor:"rgba(245,237,216,0.15)",borderTopColor:"var(--amber)"}})}):e.jsxs(e.Fragment,{children:[l==="active"&&e.jsx("div",{children:v.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ¤"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-cream mb-2",children:"Aktif eÅŸleÅŸme yok"}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--mist)"},children:"Sana uygun Ã§alÄ±ÅŸma arkadaÅŸÄ± bulmak iÃ§in eÅŸleÅŸme ara."}),e.jsx("button",{onClick:()=>r("find"),className:"btn-primary px-6 py-2.5 text-sm",children:"EÅŸleÅŸme Bul"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(s=>e.jsx(k,{match:s,currentUserId:t==null?void 0:t.uid,onAccept:g,onReject:j,onEnd:y},s.id))})}),l==="incoming"&&e.jsx("div",{children:d.length===0&&x.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“­"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-cream mb-2",children:"Bekleyen istek yok"}),e.jsx("p",{className:"text-sm",style:{color:"var(--mist)"},children:"Sana gelen eÅŸleÅŸme istekleri burada gÃ¶rÃ¼necek."})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[d.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-mono tracking-widest uppercase mb-3",style:{color:"var(--amber)"},children:["Gelen Ä°stekler (",d.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(s=>e.jsx(k,{match:s,currentUserId:t==null?void 0:t.uid,onAccept:g,onReject:j,onEnd:y},s.id))})]}),x.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-mono tracking-widest uppercase mb-3",style:{color:"var(--mist)"},children:["GÃ¶nderilen Ä°stekler (",x.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>e.jsx(k,{match:s,currentUserId:t==null?void 0:t.uid,onAccept:g,onReject:j,onEnd:y},s.id))})]})]})}),l==="find"&&e.jsx("div",{children:o.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-cream mb-2",children:"EÅŸleÅŸme bulunamadÄ±"}),e.jsxs("p",{className:"text-sm mb-6",style:{color:"var(--mist)"},children:["HenÃ¼z ortak dersleri olan baÅŸka kullanÄ±cÄ± yok.",e.jsx("br",{}),"Platform bÃ¼yÃ¼dÃ¼kÃ§e eÅŸleÅŸmeler Ã§Ä±kacak."]}),e.jsx(S,{to:"/onboarding",className:"btn-outline px-6 py-2.5 text-sm",children:"Tercihlerini GÃ¼ncelle"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((s,N)=>{var u,p;return e.jsxs("div",{className:"glass-card p-5 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:"rgba(232,160,32,0.15)",color:"var(--amber)"},children:((u=s.displayName)==null?void 0:u.charAt(0))||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-cream",children:s.displayName||"KullanÄ±cÄ±"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--mist)"},children:["Ortak: ",(p=s.commonSubjects)==null?void 0:p.join(", ")]})]}),e.jsxs("span",{className:"ml-auto text-xs font-mono font-bold",style:{color:"var(--amber)"},children:["%",s.compatibilityScore]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{background:"rgba(245,237,216,0.1)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${s.compatibilityScore}%`,background:"var(--amber)"}})}),e.jsxs("button",{className:"btn-primary w-full py-2 text-sm flex items-center justify-center gap-2",children:[e.jsx(G,{size:14})," EÅŸleÅŸme Ä°steÄŸi GÃ¶nder"]})]},N)})})})]})]})};export{J as default};
